# Description of the repo's structure and content

# Preamble

This page lists and briefly describes folders and files in the **'FCA_Fetal_Skin_priv'** repository.
It keeps scripts and notebooks created by Ni Huang for the analysis of the fetal skin data set
and handed over upon his departure for the Teichmann lab,
to Pejvak Moghimi and Stephane Ballereau who checked figures in the manuscript 
could be reproduced with data files shared by Ni (not in the repo).
Other scripts and notebooks were added when needed.

# Repository content

Folders and files are listed in alphabetical order.

* **code**: maintaining all the notebooks and scripts used either for generating figures or data-processing pipelines.
  * **notebooks**
    * **analysis** - notebooks for analyses and not specifically for figures
      * *compare_lymphoid_FS_BM_TH.ipynb* - XXX
      * **20210423_TNK_reclustering**
        * *recluster_TNK.ipynb* - reclustering of fetal skin T cells 
        * *reitermaier21_reprocess.ipynb* - reanalysis of external T cell data set with transfer of labels made for Fig1 with fetal skin data (?)
    * **figures**
      * *Fig2C.ipynb*
      * *fig2D.ipynb*
      * *figure2.ipynb*
  * **scripts**
    * **analysis**
    * **figures**

* **data**: meta data and gene lists
  * *G1-S_genes.list* - cell cycle G1 and S phase marker genes (43 genes)  
  * *G2-M_genes.list* - cell cycle G2 and M phase marker genes (55 genes)
  * *JP_cycle_genes.list* - cell cycle phase marker genes (559 genes)
  * *fetal_annotation_rachel-201904.txt* - cell type annotation for 79,344 cells in the fetal skin data set and generated by Rachel Botting
  * *fetal_skin_samples.txt* - meta data for 60 fetal skin samples 
  * *hierarchy1.txt* - 'hierarchy1' value for 232,224 cells.

* **figures**: figure files used at some point to prepare the manuscript
  * **TODO: fill description in**
  * *Pooled_KC.joint_annotation.pdf* - 
  * *fig1B.pdf* - 
  * *fig2A.pdf* - 
  * *fig2C.20220906.pdf* - 
  * *fig2D.pdf* - 
  * *fig3A_color_updated.20220823.pdf* - 
  * *fig3A_color_updated.20220823_notext.pdf* - 
  * *fig3B.20220823.pdf* - 
  * *fig3C_candidates.20221017.pdf* - 
  * *figS2C_fsk_frac.pdf* - 
  * *figS2C_fsk_prob.pdf* - 
  * *figS2C_org_frac.pdf* - 
  * *figS2C_org_prob.pdf* - 
  * *figS2C_pooled_frac.pdf* - 
  * *figS2C_pooled_prob.pdf* - 
  * **final** - 
  * **obsolete** - 

* **logs**: for keeping records and end-to-end reproducibility. Includes:
  <!-- * .yml files for keeping strict records of all used envioronments' dependencies, and creating/reproducing the used environments seemlessly. E.g. ```mamba env create --file FCA_base.yml``` -->
  <!-- * .sh file for creating/reproducing the base environment (FCA_base) seemlessly. ```Bash FCA_base.sh``` will create the FCA_base ```conda env``` locally for you. -->
  <!-- * env management env.ipynb. notebook for comprehensive record-keeping and managing of the FCA_base, and possibly other, environments. -->
  * *[FCA_base.sh](https://github.com/haniffalab/FCA_Fetal_Skin_priv/blob/main/logs/FCA_base.sh)* - shell script with mamba command to create environment to run notebooks in, made by envs.ipynb
  * *FCA_base.yml* - YAML file for environment created with FCA_base.sh and after installation of extra tools, eg sctk.
  * *FCA_base_monocle3_sb.yml* - YAML file for environment created with FCA_base.sh and after installation of monocle3, which failed (and hence does not need copying to final article repo)
  * *[FCA_init.yml](https://github.com/haniffalab/FCA_Fetal_Skin_priv/blob/main/logs/FCA_init.yml)* - Initial YAML file made by Ni. For reference, only. We're building a new YAML file based on packages imported by notebooks as we check them.
  * *code_files.ipynb* - dev notebook to read in notebooks_list.csv (was workflow.ipynb)
  * *[envs.ipynb](https://github.com/haniffalab/FCA_Fetal_Skin_priv/blob/main/logs/envs.ipynb)* - notebook to write shell script with mamba command to create environment to run notebooks in, see FCA_base.sh.
  * *envs_new.ipynb* - **TODO: describe**
  * *fig_only_files.csv* - Table listing notebooks for figure generation (subset of notebooks_list.csv)
  * *milo.yml* - YAML file corresponding to the `milo conda env` used for some of the R scripts.
  * *monocle3.yml* - YAML file corresponding to the `monocle3 conda env` used for some of the R scripts.
  * *notebooks_list.csv* - Table listing notebooks, python scripts and bash scripts found in folders shared by Ni, to fill in with descriptives information (eg aim, order of use in main workflows).
  * *pipeline_management.ipynb* - **TODO: describe**

* **models**: to maintain the statical/ML models used to produce the original results and ensure reproducibility.
  * **LR_models** - linear regression models
    * *adult_broad.pooled_fsk_ask_org.lognorm.LR.pkl* - **TODO: describe**
    * *fetal_Macrophage_by_timepoint.lognorm.pkl* - **TODO: describe**

* **tmp**: to keep temporary files created by the code.

# Data

Description of:

* molecular data (eg 10X single-cell RNA-seq, 10X VISIUM)
* analytical data, ie outcome of main analyses (see also 'Scripts' below)

**NOTE:** paths below are for the moment those on the Ni's scratch area. 

## CellPhoneDB

* The “final” fetal skin cellphoneDB results are in `/lustre/scratch126/cellgen/team205/nh3/skin/20211022_final_figures/final_fetal_cellphonedb2/`

# Figures

The section below aims at describing list figures and how the were created (code and data files).

**To be completed**

### Fig1

The atlas

### Fig2

Hair follicle differentiation in prenatal skin

See 'code/notebooks/figures/' above.

### Fig3

Temporal evolution of dermal fibroblasts and skin scarring

### Fig4

Immune cells in skin morphogenesis

### Fig5

Macrophage support and blood flow in skin vasculature formation


